{"version":3,"sources":["webpack:///static/js/cart.93a3a8dbd4cf18ab120e.js","webpack:///./src/modules/js/api.js?4c58***","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js?c08e","webpack:///./src/modules/js/cartService.js","webpack:///./src/modules/js/mixin.js?53fa"],"names":["webpackJsonp","0","module","__webpack_exports__","__webpack_require__","url","hotLists","banner","topLists","subLists","rank","searchList","details","deal","addCart","cartLists","cartReduce","cartRemove","cartMrremove","addressLists","addressAdd","addressRemove","addressUpdate","addressDefault","key","hasOwnProperty","113","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__cart_base_css__","__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__","n","__WEBPACK_IMPORTED_MODULE_2__cart_css__","__WEBPACK_IMPORTED_MODULE_3_vue__","__WEBPACK_IMPORTED_MODULE_4_js_mixin_js__","__WEBPACK_IMPORTED_MODULE_5_axios__","__WEBPACK_IMPORTED_MODULE_5_axios___default","__WEBPACK_IMPORTED_MODULE_6_qs__","__WEBPACK_IMPORTED_MODULE_7_js_api_js__","__WEBPACK_IMPORTED_MODULE_8_velocity_animate__","__WEBPACK_IMPORTED_MODULE_8_velocity_animate___default","__WEBPACK_IMPORTED_MODULE_9_js_cartService_js__","el","data","lists","total","editingShop","editingShopIndex","removePopup","removeData","removeMsg","computed","allSelected","get","this","length","every","shop","checked","set","newVal","console","log","forEach","goodsList","good","allRemoveSelected","removeChecked","selectLists","arr","push","price","number","removeLists","created","getList","methods","_this","a","then","res","cartList","editing","editingMsg","selectGood","attr","selectShop","selectAll","shopIndex","item","i","reduce","id","add","remove","goodIndex","removeList","removeConfrim","_this2","_removeData","post","splice","removeShop","ids","findIndex","start","event","startX","changedTouches","clientX","end","endX","left","$refs","mixins","18","fetch","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","__WEBPACK_IMPORTED_MODULE_1_axios___default","status","location","href","catch","error","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_1_axios__","77","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__","__WEBPACK_IMPORTED_MODULE_3_js_api_js__","Cart","8","mixin","filters","currency","priceStr","indexOf","split","substr","81","exports","82","83"],"mappings":"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","file":"static/js/cart.93a3a8dbd4cf18ab120e.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 0:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar url = {\n    hotLists: 'index/hotLists',\n    banner: 'index/banner',\n    topLists: 'category/topList',\n    subLists: \"category/subList\",\n    rank: 'category/rank',\n    searchList: 'search/list',\n    details: \"goods/details\",\n    deal: 'goods/deal',\n    addCart: 'cart/add',\n    cartLists: 'cart/list',\n    cartReduce: 'cart/reduce',\n    cartRemove: 'cart/remove',\n    cartMrremove: 'cart/mrremove',\n    addressLists: 'address/list',\n    addressAdd: 'address/add',\n    addressRemove: 'address/remove',\n    addressUpdate: 'address/update',\n    addressDefault: 'address/setDefault'\n\n    //开发环境和真实环境的切换\n};var host = '//rap2api.taobao.org/app/mock/7058/';\n\nfor (var key in url) {\n    if (url.hasOwnProperty(key)) {\n        url[key] = host + url[key];\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (url);\n\n/***/ }),\n\n/***/ 113:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_base_css__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_base_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__cart_base_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_trade_css__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_trade_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_css__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__cart_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_js_mixin_js__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_qs__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_qs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_qs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_js_api_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_velocity_animate__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_velocity_animate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_velocity_animate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_js_cartService_js__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_js_fetch_js__ = __webpack_require__(18);\n\n\n\n\n\n\n\n\n\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_3_vue__[\"default\"]({\n    el: '.container',\n    data: {\n        lists: null,\n        total: 0,\n        editingShop: null,\n        editingShopIndex: -1,\n        removePopup: false,\n        removeData: null,\n        removeMsg: ''\n    },\n    computed: {\n        allSelected: {\n            get: function get() {\n                if (this.lists && this.lists.length) {\n                    return this.lists.every(function (shop) {\n                        return shop.checked;\n                    });\n                }\n                return false;\n            },\n            set: function set(newVal) {\n                console.log(1);\n                this.lists.forEach(function (shop) {\n                    shop.checked = newVal;\n                    shop.goodsList.forEach(function (good) {\n                        good.checked = newVal;\n                    });\n                });\n            }\n        },\n        allRemoveSelected: {\n            get: function get() {\n                if (this.editingShop) {\n                    return this.editingShop.removeChecked;\n                }\n                return false;\n            },\n            set: function set(newVal) {\n                if (this.editingShop) {\n                    this.editingShop.removeChecked = newVal;\n                    this.editingShop.goodsList.forEach(function (good) {\n                        good.removeChecked = newVal;\n                    });\n                }\n            }\n        },\n        selectLists: function selectLists() {\n            if (this.lists && this.lists.length) {\n                var arr = [];\n                var total = 0;\n                this.lists.forEach(function (shop) {\n                    shop.goodsList.forEach(function (good) {\n                        if (good.checked) {\n                            arr.push(good);\n                            total += good.price * good.number;\n                        }\n                    });\n                });\n                this.total = total;\n                return arr;\n            }\n            return [];\n        },\n        //不需要get和set就用方法来写\n        removeLists: function removeLists() {\n            if (this.editingShop) {\n                var arr = [];\n                this.editingShop.goodsList.forEach(function (good) {\n                    if (good.removeChecked) {\n                        arr.push(good);\n                    }\n                });\n                return arr;\n            }\n            return [];\n        }\n    },\n    created: function created() {\n        this.getList();\n    },\n\n    methods: {\n        getList: function getList() {\n            var _this = this;\n\n            __WEBPACK_IMPORTED_MODULE_5_axios___default.a.get(__WEBPACK_IMPORTED_MODULE_7_js_api_js__[\"a\" /* default */].cartLists).then(function (res) {\n                var lists = res.data.cartList;\n                lists.forEach(function (shop) {\n                    shop.checked = true;\n                    shop.removeChecked = false;\n                    shop.editing = false;\n                    shop.editingMsg = '编辑';\n                    shop.goodsList.forEach(function (good) {\n                        good.checked = true;\n                        good.removeChecked = false;\n                    });\n                });\n                _this.lists = lists;\n            });\n        },\n        selectGood: function selectGood(shop, good) {\n            var attr = this.editingShop ? 'removeChecked' : 'checked';\n            good[attr] = !good[attr];\n            shop[attr] = shop.goodsList.every(function (good) {\n                return good[attr];\n            });\n        },\n        selectShop: function selectShop(shop) {\n            var attr = this.editingShop ? 'removeChecked' : 'checked';\n            shop[attr] = !shop[attr];\n            shop.goodsList.forEach(function (good) {\n                good[attr] = shop[attr];\n            });\n        },\n        selectAll: function selectAll() {\n            var attr = this.editingShop ? 'allRemoveSelected' : 'allSelected';\n            this[attr] = !this[attr];\n        },\n        editing: function editing(shop, shopIndex) {\n            shop.editing = !shop.editing;\n            shop.editingMsg = shop.editing ? '完成' : '编辑';\n            this.lists.forEach(function (item, i) {\n                if (shopIndex !== i) {\n                    item.editing = false;\n                    item.editingMsg = shop.editing ? '' : '编辑';\n                }\n            });\n            this.editingShop = shop.editing ? shop : null;\n            this.editingShopIndex = shop.editing ? shopIndex : -1;\n        },\n        reduce: function reduce(good) {\n            if (good.number === 1) return;\n            __WEBPACK_IMPORTED_MODULE_9_js_cartService_js__[\"a\" /* default */].reduce(good.id).then(function (res) {\n                good.number--;\n            });\n            /* axios.post(url.cartReduce, {\r\n                id: good.id,\r\n                number: good.number\r\n            }).then(res => {\r\n                good.number--\r\n                console.log('reduce success')\r\n            }) */\n        },\n        add: function add(good) {\n            __WEBPACK_IMPORTED_MODULE_9_js_cartService_js__[\"a\" /* default */].add(good.id).then(function (res) {\n                good.number++;\n            });\n            /* axios.post(url.addCart, {\r\n                id: good.id,\r\n                number: 1\r\n            }).then(res => {\r\n                good.number++\r\n                console.log('success')\r\n            }) */\n        },\n        remove: function remove(shop, shopIndex, good, goodIndex) {\n            this.removePopup = true;\n            this.removeData = { shop: shop, shopIndex: shopIndex, good: good, goodIndex: goodIndex };\n            this.removeMsg = '确定要删除该商品吗？';\n        },\n        removeList: function removeList() {\n            this.removePopup = true;\n            this.removeMsg = '\\u786E\\u5B9A\\u8981\\u5C06\\u6240\\u9009' + this.removeLists.length + '\\u4E2A\\u5546\\u54C1\\u5220\\u9664';\n        },\n        removeConfrim: function removeConfrim() {\n            var _this2 = this;\n\n            if (this.removeMsg === '确定要删除该商品吗？') {\n                var _removeData = this.removeData,\n                    shop = _removeData.shop,\n                    shopIndex = _removeData.shopIndex,\n                    good = _removeData.good,\n                    goodIndex = _removeData.goodIndex;\n\n                __WEBPACK_IMPORTED_MODULE_5_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_7_js_api_js__[\"a\" /* default */].cartRemove, {\n                    id: good.id\n                }).then(function (res) {\n                    shop.goodsList.splice(goodIndex, 1);\n                    if (!shop.goodsList.length) {\n                        _this2.lists.splice(shopIndex, 1);\n                        _this2.removeShop();\n                    }\n                    _this2.removePopup = false;\n                    //this.$refs[`goods-${shopIndex}-${goodIndex}`][0].style.left = '0px'\n                });\n            } else {\n                var ids = [];\n                this.removeLists.forEach(function (good) {\n                    ids.push(good.id);\n                });\n                __WEBPACK_IMPORTED_MODULE_5_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_7_js_api_js__[\"a\" /* default */].cartMrremove, {\n                    ids: ids\n                }).then(function (res) {\n                    var arr = [];\n                    _this2.editingShop.goodsList.forEach(function (good) {\n                        var index = _this2.removeLists.findIndex(function (item) {\n                            return item.id == good.id;\n                        });\n                        if (index === -1) {\n                            arr.push(good);\n                        }\n                    });\n                    if (arr.length) {\n                        _this2.editingShop.goodsList = arr;\n                    } else {\n                        _this2.lists.splice(_this2.editingShopIndex, 1);\n                        _this2.removeShop();\n                    }\n                    _this2.removePopup = false;\n                });\n            }\n        },\n        removeShop: function removeShop() {\n            this.editingShop = null;\n            this.editingShopIndex = -1;\n            this.lists.forEach(function (shop) {\n                shop.editing = false;\n                shop.editingMsg = '编辑';\n            });\n        },\n        start: function start(event, good) {\n            good.startX = event.changedTouches[0].clientX;\n        },\n        end: function end(event, shopIndex, good, goodIndex) {\n            var endX = event.changedTouches[0].clientX;\n            var left = '0';\n            if (good.startX - endX > 100) {\n                left = '-60px';\n            }\n            if (endX - good.startX > 100) {\n                left = '0px';\n            }\n            __WEBPACK_IMPORTED_MODULE_8_velocity_animate___default()(this.$refs['goods-' + shopIndex + '-' + goodIndex], {\n                left: left\n            });\n        }\n    },\n    mixins: [__WEBPACK_IMPORTED_MODULE_4_js_mixin_js__[\"a\" /* default */]]\n});\n\n/* 使用Mock js来mock数据\r\nimport Mock  from 'mockjs'\r\nlet random = Mock.Random\r\nlet data = Mock.mock({\r\n    'cartList|3':[\r\n        {\r\n            'goodsList|1-2' :[{\r\n                id:random.int(10000,100000),\r\n                image:Mock.mock('@image(90x90,@color)')\r\n            }]\r\n        }\r\n    ]\r\n})\r\nconsole.log(data)\r\n */\n\n/***/ }),\n\n/***/ 18:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_js_api_js__ = __webpack_require__(0);\n\n\n\n\nfunction fetch(url, data) {\n    return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n\n        __WEBPACK_IMPORTED_MODULE_1_axios___default.a.post(url, data).then(function (res) {\n            var status = res.data.status;\n            if (status === 200) {\n                resolve(res);\n            }\n            if (status === 300) {\n                location.href = '';\n                resolve(res);\n            }\n            reject(res);\n        }).catch(function (error) {\n            reject(error);\n        });\n    });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (fetch);\n\n/***/ }),\n\n/***/ 77:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_js_fetch_js__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_api_js__ = __webpack_require__(0);\n\n\n\n\n\nvar Cart = function () {\n    function Cart() {\n        __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Cart);\n    }\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Cart, null, [{\n        key: 'add',\n        value: function add(id) {\n            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].addCart, {\n                id: id,\n                number: 1\n            });\n        }\n    }, {\n        key: 'reduce',\n        value: function reduce(id) {\n            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].cartReduce, {\n                id: id,\n                number: 1\n            });\n        }\n    }]);\n\n    return Cart;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cart);\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar mixin = {\n  filters: {\n    currency: function currency(price) {\n      var priceStr = '' + price;\n      if (priceStr.indexOf('.') > -1) {\n        var arr = priceStr.split('.');\n        return arr[0] + '.' + (arr[1] + '0').substr(0, 2);\n      } else {\n        return priceStr + '.00';\n      }\n    }\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mixin);\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 82:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 83:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[113]);\n\n\n// WEBPACK FOOTER //\n// static/js/cart.93a3a8dbd4cf18ab120e.js","let url = {\r\n    hotLists:'index/hotLists',\r\n    banner: 'index/banner',\r\n    topLists: 'category/topList',\r\n    subLists: \"category/subList\",\r\n    rank:'category/rank',\r\n    searchList:'search/list',\r\n    details:\"goods/details\",\r\n    deal:'goods/deal',\r\n    addCart:'cart/add',\r\n    cartLists:'cart/list',\r\n    cartReduce:'cart/reduce',\r\n    cartRemove:'cart/remove',\r\n    cartMrremove:'cart/mrremove',\r\n    addressLists:'address/list',\r\n    addressAdd:'address/add',\r\n    addressRemove:'address/remove',\r\n    addressUpdate:'address/update',\r\n    addressDefault:'address/setDefault'\r\n}\r\n\r\n//开发环境和真实环境的切换\r\nlet host = '//rap2api.taobao.org/app/mock/7058/'\r\n\r\nfor(let key in url){\r\n    if(url.hasOwnProperty(key)){\r\n        url[key] = host + url[key]\r\n    }\r\n}\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import './cart_base.css'\r\nimport './cart_trade.css'\r\nimport './cart.css'\r\n\r\nimport Vue from 'vue'\r\nimport mixin from 'js/mixin.js'\r\nimport axios from 'axios'\r\nimport qs from 'qs'\r\nimport url from 'js/api.js'\r\nimport Volecity from'velocity-animate'\r\nimport Cart from 'js/cartService.js'\r\nimport fetch from 'js/fetch.js'\r\n\r\nnew Vue({\r\n    el: '.container',\r\n    data: {\r\n        lists: null,\r\n        total: 0,\r\n        editingShop: null,\r\n        editingShopIndex: -1,\r\n        removePopup: false,\r\n        removeData: null,\r\n        removeMsg: ''\r\n    },\r\n    computed: {\r\n        allSelected: {\r\n            get() {\r\n                if (this.lists && this.lists.length) {\r\n                    return this.lists.every(shop => {\r\n                        return shop.checked\r\n                    })\r\n                }\r\n                return false\r\n            },\r\n            set(newVal) {\r\n                console.log(1)\r\n                this.lists.forEach(shop => {\r\n                    shop.checked = newVal\r\n                    shop.goodsList.forEach(good => {\r\n                        good.checked = newVal\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        allRemoveSelected: {\r\n            get() {\r\n                if (this.editingShop) {\r\n                    return this.editingShop.removeChecked\r\n                }\r\n                return false\r\n            },\r\n            set(newVal) {\r\n                if (this.editingShop) {\r\n                    this.editingShop.removeChecked = newVal\r\n                    this.editingShop.goodsList.forEach(good => {\r\n                        good.removeChecked = newVal\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        selectLists() {\r\n            if (this.lists && this.lists.length) {\r\n                let arr = []\r\n                let total = 0\r\n                this.lists.forEach(shop => {\r\n                    shop.goodsList.forEach(good => {\r\n                        if (good.checked) {\r\n                            arr.push(good)\r\n                            total += good.price * good.number\r\n                        }\r\n                    })\r\n                })\r\n                this.total = total\r\n                return arr\r\n            }\r\n            return []\r\n        },   //不需要get和set就用方法来写\r\n        removeLists() {\r\n            if (this.editingShop) {\r\n                let arr = []\r\n                this.editingShop.goodsList.forEach(good => {\r\n                    if (good.removeChecked) {\r\n                        arr.push(good)\r\n                    }\r\n                })\r\n                return arr\r\n            }\r\n            return []\r\n        }\r\n    },\r\n    created() {\r\n        this.getList()\r\n    },\r\n    methods: {\r\n        getList() {\r\n            axios.get(url.cartLists).then(res => {\r\n                let lists = res.data.cartList\r\n                lists.forEach(shop => {\r\n                    shop.checked = true\r\n                    shop.removeChecked = false\r\n                    shop.editing = false\r\n                    shop.editingMsg = '编辑'\r\n                    shop.goodsList.forEach(good => {\r\n                        good.checked = true\r\n                        good.removeChecked = false\r\n                    })\r\n                })\r\n                this.lists = lists\r\n            })\r\n        },\r\n        selectGood(shop, good) {\r\n            let attr = this.editingShop ? 'removeChecked' : 'checked'\r\n            good[attr] = !good[attr]\r\n            shop[attr] = shop.goodsList.every(good => {\r\n                return good[attr]\r\n            })\r\n        },\r\n        selectShop(shop) {\r\n            let attr = this.editingShop ? 'removeChecked' : 'checked'\r\n            shop[attr] = !shop[attr]\r\n            shop.goodsList.forEach(good => {\r\n                good[attr] = shop[attr]\r\n            })\r\n        },\r\n        selectAll() {\r\n            let attr = this.editingShop ? 'allRemoveSelected' : 'allSelected'\r\n            this[attr] = !this[attr]\r\n        },\r\n        editing(shop, shopIndex) {\r\n            shop.editing = !shop.editing\r\n            shop.editingMsg = shop.editing ? '完成' : '编辑'\r\n            this.lists.forEach((item, i) => {\r\n                if (shopIndex !== i) {\r\n                    item.editing = false\r\n                    item.editingMsg = shop.editing ? '' : '编辑'\r\n                }\r\n            })\r\n            this.editingShop = shop.editing ? shop : null\r\n            this.editingShopIndex = shop.editing ? shopIndex : -1\r\n        },\r\n        reduce(good) {\r\n            if (good.number === 1) return\r\n            Cart.reduce(good.id).then(res=>{\r\n                good.number--\r\n            })\r\n            /* axios.post(url.cartReduce, {\r\n                id: good.id,\r\n                number: good.number\r\n            }).then(res => {\r\n                good.number--\r\n                console.log('reduce success')\r\n            }) */\r\n        },\r\n        add(good) {\r\n            Cart.add(good.id).then(res=>{\r\n                good.number ++\r\n            })\r\n            /* axios.post(url.addCart, {\r\n                id: good.id,\r\n                number: 1\r\n            }).then(res => {\r\n                good.number++\r\n                console.log('success')\r\n            }) */\r\n        },\r\n        remove(shop, shopIndex, good, goodIndex) {\r\n            this.removePopup = true\r\n            this.removeData = { shop, shopIndex, good, goodIndex }\r\n            this.removeMsg = '确定要删除该商品吗？'\r\n        },\r\n        removeList() {\r\n            this.removePopup = true\r\n            this.removeMsg = `确定要将所选${this.removeLists.length}个商品删除`\r\n        },\r\n        removeConfrim() {\r\n            if (this.removeMsg === '确定要删除该商品吗？') {\r\n                let { shop, shopIndex, good, goodIndex } = this.removeData\r\n                axios.post(url.cartRemove, {\r\n                    id: good.id\r\n                }).then(res => {\r\n                    shop.goodsList.splice(goodIndex, 1)\r\n                    if (!shop.goodsList.length) {\r\n                        this.lists.splice(shopIndex, 1)\r\n                        this.removeShop()\r\n                    }\r\n                    this.removePopup = false\r\n                    //this.$refs[`goods-${shopIndex}-${goodIndex}`][0].style.left = '0px'\r\n                })\r\n            }else{\r\n                let ids = []\r\n                this.removeLists.forEach(good =>{\r\n                    ids.push(good.id)\r\n                })\r\n                axios.post(url.cartMrremove,{\r\n                    ids\r\n                }).then(res=>{\r\n                    let arr = []\r\n                    this.editingShop.goodsList.forEach(good =>{\r\n                        let index = this.removeLists.findIndex(item =>{\r\n                            return item.id == good.id\r\n                        })\r\n                        if(index === -1){\r\n                            arr.push(good)\r\n                        }\r\n                    })\r\n                    if(arr.length){\r\n                        this.editingShop.goodsList = arr\r\n                    }else{\r\n                        this.lists.splice(this.editingShopIndex,1)\r\n                        this.removeShop()\r\n                    }\r\n                    this.removePopup = false\r\n                })\r\n            }\r\n\r\n        },\r\n        removeShop() {\r\n            this.editingShop = null\r\n            this.editingShopIndex = -1\r\n            this.lists.forEach(shop => {\r\n                shop.editing = false\r\n                shop.editingMsg = '编辑'\r\n            })\r\n        },\r\n        start(event,good){\r\n            good.startX = event.changedTouches[0].clientX\r\n\r\n        },\r\n        end(event,shopIndex,good,goodIndex){\r\n            let endX = event.changedTouches[0].clientX\r\n            let left = '0'\r\n            if(good.startX - endX > 100){\r\n                left = '-60px'\r\n            }\r\n            if(endX - good.startX > 100){\r\n                left = '0px'\r\n            }\r\n            Volecity( this.$refs[`goods-${shopIndex}-${goodIndex}`],{\r\n                left\r\n            })\r\n           \r\n        }\r\n    },\r\n    mixins: [mixin]\r\n})\r\n\r\n\r\n\r\n/* 使用Mock js来mock数据\r\nimport Mock  from 'mockjs'\r\nlet random = Mock.Random\r\nlet data = Mock.mock({\r\n    'cartList|3':[\r\n        {\r\n            'goodsList|1-2' :[{\r\n                id:random.int(10000,100000),\r\n                image:Mock.mock('@image(90x90,@color)')\r\n            }]\r\n        }\r\n    ]\r\n})\r\nconsole.log(data)\r\n */\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import axios from 'axios'\r\nimport url from 'js/api.js'\r\n\r\n\r\nfunction fetch(url,data){\r\n    return new Promise((resolve,reject)=>{\r\n        \r\n        axios.post(url,data).then(res=>{\r\n            let status = res.data.status\r\n            if(status ===200){\r\n                resolve(res)\r\n            }\r\n            if(status ===300){\r\n                location.href = ''\r\n                resolve(res)\r\n            }\r\n            reject(res)\r\n        }).catch(error=>{\r\n            reject(error)\r\n        })\r\n    })\r\n}\r\n\r\nexport default fetch\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js","import fetch from 'js/fetch.js'\r\nimport url from 'js/api.js'\r\n\r\nclass Cart{\r\n    static add(id){\r\n        return fetch(url.addCart,{\r\n            id,\r\n            number:1\r\n        })\r\n    }\r\n    \r\n    static reduce(id){\r\n        return fetch(url.cartReduce,{\r\n            id,\r\n            number:1\r\n        })\r\n    }\r\n}\r\n\r\nexport default Cart\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js","let mixin = {\n  filters: {\n    currency(price) {\n      let priceStr = '' + price\n      if (priceStr.indexOf('.') > -1) {\n        let arr = priceStr.split('.')\n        return arr[0] + '.' + (arr[1] + '0').substr(0, 2)\n      } else {\n        return priceStr + '.00'\n      }\n    }\n  }\n}\n\nexport default mixin\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js"],"sourceRoot":""}